#### **运营分析平台**
**实时任务**
1. flink任务实时处理idmapping，需要使用ots的主键进行点查场景
2. flink任务实时写入odps数据
3. flink实时任务写入clickhouse集群

**clickhouse：**
1. 涉及ck集群重新部署华为云
2. 原有老数据进行数据迁移，及对应的集群监控告警搭建。

**离线任务**
1. 离线数据通过datax推送到ck集群（流程及效率）
#### **ondId**
1. 实时任务flink任务对ots的读写
2. 离线数据每日写入ots表
3. 应用逻辑需要查询ots数据，涉及到主键查询，二级索引查询
#### 神盾局
1. 离线数据由odps写入ots
2. 应用查询ots进行数据
#### 小结
1. ots组件需要使用hbase进行平替
2. clickhouse集群迁移，涉及数据迁移及对应的监控迁移以及应用和任务修改
3. flink任务实时写入odps需要改造，需实时平台提供对应的插件

| 项目       | 改造点                                                | 备注                                |
| ---------- | ----------------------------------------------------- | ----------------------------------- |
| ots        | 支持ots场景中的点查，二级索引查询，主键scan查询       | 现今神盾局300亿+数据，查询效率300ms |
| clickhouse | 数据迁移，应用及任务改造，支持监控报警配置            |                                     |
| odps       | 实时平台需要提供connector写入华为云，平替写入odps场景 | 需要满足稳定性及性能                |
| 离线推送   | 离线数仓数据推送ck，ots等场景                         | 需满足稳定性及性能                                    |
